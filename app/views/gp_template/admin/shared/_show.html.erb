<%- return '' unless defined?(template) && defined?(template_values) -%>

<%- template.items.each do |item| -%>
  <%- if item.item_type == 'rich_text' -%>
  <table class="show">
    <tr>
      <th><%= item.title %></th>
    </tr>
    <tr>
      <td class="cke_editor_wrapper">
        <%= text_area_tag "template_values[#{item.name}]", template_values[item.name].to_s.gsub(/("|')file_contents\//, '\1' + file_uri), class: 'ckeditor' %>
      </td>
    </tr>
  </table>
  <%- else -%>
  <table class="show">
    <tr>
      <th><%= item.title %></th>
      <td><%=simple_format template_values[item.name] %></td>
    </tr>
  </table>
  <%- end -%>
<%- end -%>
