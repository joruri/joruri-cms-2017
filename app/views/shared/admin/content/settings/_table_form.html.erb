<table id="table_field">
  <tr>
    <td>見出し（任意）</td>
    <td>データ（置き換えテキスト入力）</td>
    <td></td>
  </tr>
  <%- @item.value.each_with_index do |l, i| -%>
  <tr class="table_row">
    <td><%= text_field_tag "item[value][][header]", l[:header], style: 'width: 300px;' %></td>
    <td><%= text_field_tag "item[value][][data]",   l[:data]  , style: 'width: 300px;'%></td>
    <td class="del"><%= link_to '削除', '#', class: 'remove_row' if i != 0 %></td>
  </tr>
  <%- end -%>
</table>
<span><%= button_tag '追加', type: 'button', id: 'add_row' %></span>

<script>
$(function() {
  $("#add_row").addFields({
    container: "#table_field",
    fields: ".table_row"
  });

  $('#table_field').on("click", "a.remove_row", function(e) {
    $(this).parent().parent().remove();
    return false;
  });
});
</script>
